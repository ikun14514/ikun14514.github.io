(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))v(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&v(i)}).observe(document,{childList:!0,subtree:!0});function h(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function v(r){if(r.ep)return;r.ep=!0;const s=h(r);fetch(r.href,s)}})();document.addEventListener("DOMContentLoaded",function(){const E=document.getElementById("dict-word"),a=document.getElementById("lookup-btn"),h=document.getElementById("dict-result");a.addEventListener("click",function(){const e=E.value.trim();if(!e){s("请输入要查询的单词");return}v(e)}),E.addEventListener("keypress",function(e){e.key==="Enter"&&a.click()});function v(e){h.innerHTML='<div class="loading">正在查询...</div>';const t=`https://cdn.jsdelivr.net/gh/lyc8503/baicizhan-word-meaning-API/data/words/${e}.json`;fetch(t).then(n=>{if(!n.ok)throw new Error("网络响应错误");return n.json()}).then(n=>{r(n)}).catch(n=>{s(`查询失败: ${n.message}`)})}function r(e){if(!e||!e.word){s("未找到该单词的信息");return}const t=`
            <div class="word-info">
                <span class="word">${e.word}</span>
                ${e.accent?`<span class="accent">${e.accent}</span>`:""}
            </div>
            ${e.mean_cn?`<div class="mean_cn">${e.mean_cn}</div>`:""}
            ${e.mean_en?`<div class="mean_en">${e.mean_en}</div>`:""}
            ${e.sentence?`
            <div class="sentence">${e.sentence}</div>
            ${e.sentence_trans?`<div class="sentence_trans">${e.sentence_trans}</div>`:""}
            `:""}
        `;h.innerHTML=t}function s(e){h.innerHTML=`<div class="error">${e}</div>`}document.body.style.backgroundImage="url(https://tc.z.wiki/autoupload/f/7sC8pZ0XsyqK72FYJjIW3jK4ecaMZdOc36Uq6NWA8WKyl5f0KlZfm6UsKj-HyTuv/20250803/tL5S/1200X656/background1.png)";const i=document.getElementById("word-input"),I=document.getElementById("line-numbers"),M=document.getElementById("load-words"),u=document.getElementById("word-display"),C=document.getElementById("prev-word"),k=document.getElementById("next-word"),$=document.getElementById("random-word"),j=document.getElementById("word-counter"),S=document.getElementById("jump-to"),z=document.getElementById("jump-btn"),O=document.getElementById("no-repeat"),H=document.getElementById("search-word"),N=document.getElementById("search-btn"),_=document.getElementById("paste-words");let o=[],c=0,w=[],g=!1,x=!0;const A=document.getElementById("fun-mode");function b(){return["/audio/cn/gululu.mp3","/audio/cn/gururu.mp3","/audio/cn/要坏掉了.mp3","/audio/cn/转圈圈.mp3","/audio/cn/转圈圈咯.mp3"]}function F(){const e=b(),t=Math.floor(Math.random()*e.length);return e[t]}function K(){let e;x?(x=!1,e=b()[0]):e=F();let t=new Audio;t.src=e,t.onerror=function(){},t.play().catch(n=>{}),t.addEventListener("ended",function(){this.remove()})}A.addEventListener("change",function(){g=this.checked,g=this.checked,g&&B(function(){})});function B(e){if(!g){e();return}const t=document.createElement("img");t.src="/黑塔转圈圈.gif",t.style.position="absolute",t.style.height="100%",t.style.width="100%",t.style.objectFit="contain",t.style.opacity="0",t.style.transform="translateX(100%) scale(0.8)",t.style.transition="all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)",u.style.position="relative",u.innerHTML="",u.appendChild(t),t.onload=function(){t.offsetWidth,t.style.opacity="1",t.style.transform="translateX(0) scale(1)",K(),setTimeout(()=>{t.style.transition="all 0.8s cubic-bezier(0.165, 0.84, 0.44, 1)",t.style.opacity="0",t.style.transform="translateX(-100%) scale(0.8)",setTimeout(()=>{u.innerHTML="",e()},800)},1e3)},t.onerror=function(){alert("GIF动画加载失败，请检查文件是否存在"),u.innerHTML="",e()}}function L(){const t=i.value.split(`
`);let n="";for(let d=0;d<t.length;d++)n+="<div>"+(d+1)+"</div>";I.innerHTML=n,I.scrollTop=i.scrollTop}i.addEventListener("input",L),i.addEventListener("scroll",function(){I.scrollTop=i.scrollTop}),N.addEventListener("click",function(){const e=H.value.trim().toLowerCase();if(e===""){alert("请输入要搜索的单词！");return}if(o.length===0){alert("请先加载单词！");return}const t=o.findIndex(n=>n.toLowerCase().includes(e));t!==-1?(c=t,f(),m(),P(e)):alert("未找到匹配的单词！")});function P(e){const d=i.value.toLowerCase().indexOf(e);if(d!==-1){const y=d+e.length,p=i.scrollTop;i.setSelectionRange(d,y),i.scrollTop=p,i.focus()}}L(),_.addEventListener("click",async function(){try{const e=await navigator.clipboard.readText();if(!e){alert("剪贴板为空！");return}let t=e.replace(/[^a-zA-Z0-9\s.,!?'-]/g," ");t=t.replace(/\s+/g,`
`),t=t.trim(),i.value=t,L(),T()}catch(e){alert("粘贴失败: "+e.message)}});function T(){const e=i.value.trim();if(e===""){alert("请输入单词！");return}let t=e.split(`
`).map(n=>n.trim()).filter(n=>n!=="");if(t.length===0){alert("没有找到有效的单词！");return}o=t,c=0,w=[],f(),m()}M.addEventListener("click",T);function W(e,t){let n=40;const d=16,p=e.offsetWidth-40,l=document.createElement("span");for(l.style.visibility="hidden",l.style.position="absolute",l.style.whiteSpace="nowrap",l.textContent=t,document.body.appendChild(l);n>d&&(l.style.fontSize=n+"px",!(l.offsetWidth<=p));)n-=2;e.style.fontSize=n+"px",document.body.removeChild(l)}function f(){o.length!==0&&(g?B(()=>{u.textContent=o[c],W(u,o[c])}):(u.textContent=o[c],W(u,o[c])))}function m(){j.textContent=`当前: ${c+1}/${o.length}`}C.addEventListener("click",function(){o.length!==0&&(c=(c-1+o.length)%o.length,f(),m())}),k.addEventListener("click",function(){o.length!==0&&(c=(c+1)%o.length,f(),m())}),$.addEventListener("click",function(){if(o.length!==0){if(O.checked){if(w.length>=o.length){alert("所有单词都已抽选过！");return}let e;do e=Math.floor(Math.random()*o.length);while(w.includes(e));w.push(e),c=e}else c=Math.floor(Math.random()*o.length);f(),m()}}),z.addEventListener("click",function(){const e=parseInt(S.value);let n=i.value.split(`
`);if(n.length>0&&n[n.length-1]===""&&(n=n.slice(0,-1)),isNaN(e)||e<1||e>n.length){alert(`请输入1到${n.length}之间的数字！`);return}o=n.map(l=>l.trim()).filter(l=>l!=="");const y=n[e-1].trim();if(y===""){alert("该行没有有效的单词！");return}const p=o.indexOf(y);p!==-1?c=p:c=0,f(),m()})});
